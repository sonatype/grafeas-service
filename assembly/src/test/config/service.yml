---
server:
  type: default
  applicationContextPath: /

  applicationConnectors:
    - type: http
      port: 8080

  adminConnectors:
    - type: http
      port: 8081

  requestLog:
    appenders:
      - type: file
        currentLogFilename: "${SERVICE_LOGDIR:-log}/request.log"
        archivedLogFilenamePattern: "${SERVICE_LOGDIR:-log}/request-%d.log.gz"

logging:
  level: INFO

  loggers:
    org.sonatype.goodies.grafeas: DEBUG
    org.apache.shiro.grafeas: DEBUG
    org.apache.shiro.dropwizard: DEBUG
    org.glassfish.jersey.logging.LoggingFeature: DEBUG

  appenders:
    - type: console
      threshold: DEBUG
      logFormat: "%d{'yyyy-MM-dd HH:mm:ss,SSSZ'} %-5level [%thread] %X{user:-*SYSTEM} %logger - %msg%n"

    - type: file
      threshold: ALL
      logFormat: "%d{'yyyy-MM-dd HH:mm:ss,SSSZ'} %-5level [%thread] %X{user:-*SYSTEM} %logger - %msg%n"
      currentLogFilename: "${SERVICE_LOGDIR:-log}/service.log"
      archivedLogFilenamePattern: "${SERVICE_LOGDIR:-log}/service-%d.log.gz"

database:
  migrate: yes
  dataSource:
    driverClass: org.h2.Driver
    url: "jdbc:h2:${SERVICE_DBDIR:-./db}/grafeas"
    user: sa
    password: ""

viewRenderers:
  freemarker:
    strict_syntax: yes
    whitespace_stripping: yes
    url_escaping_charset: UTF-8
#    template_exception_handler: rethrow
    template_exception_handler: html_debug

site:
  resourceMode: DEV
